<div id="div-tabla-requisa">
    
    <div class="row">
        <div class="contenedor-filtro">
            <div class="row">
                <div class="titulo">AUTORIZAR REQUISA</div>
            </div>
            <div class="row">

                <div class="row gx-0 contenedor-buscar">
                    <div class="col-12 col-md-12 col-lg-4 offset-lg-8 mb-1">
                        <div class="input-group">
                            <span class="input-group-text"><i class="fa-solid fa-magnifying-glass"></i></span>

                            <div class="form-floating">
                                <input type="text" id="txtBuscar" class="form-control" placeholder="Buscar No Requisa"
                                    aria-label="Buscar No Requisa" formControlName="txtBuscar" (keyup)="v_Filtrar($event)">
                                <label for="txtBuscar">Buscar No Requisa</label>

                            </div>
                            <span class="input-group-text"> <button type="button" class="btn btn-opcional"
                                    id="btnRefrescarRequisa" (click)="V_CargarRequisa();"><i
                                        class="fa-solid fa-arrows-rotate fa-spin fa-lg"></i> Refrescar</button>
                            </span>



                        </div>
                    </div>
                </div>
               
            </div>


        </div>
    </div>

    <div>

        <div class="row">

            <div class="escan-table">

                <table class="table table-hover tabla-requisa  table-sm tabla-layout mat-elevation-z8" mat-table
                [dataSource]="lstRequisa">



                <ng-container matColumnDef="IdRequisa">
                    <td mat-cell *matCellDef="let det; let x = index;">

                        <div class="row">

                            <div class="col-6 com-sm-6 col-md-6 col-lg-3">


                                <div class="row">
                                    <div class="col-12 col-sm-12 col-md-6 col-lg-6">
                                        <span><b>No Requisa </b></span>
                                    </div>
                                    <div class="col-12 col-sm-12 col-md-6 col-lg-6">{{det.NoRequisa}}</div>
                                </div>

                                <div class="row">
                                    <div class="col-12 col-sm-12 col-md-6 col-lg-6">
                                        <span><b>Bodega Origen </b></span>
                                    </div>
                                    <div class="col-12 col-sm-12 col-md-6 col-lg-6">{{det.CodBodega}}</div>

                                </div>


                                <div class="row">
                                    <div class="col-12 col-sm-12 col-md-6 col-lg-6">
                                        <span><b>Bodega Destino </b></span>
                                    </div>
                                    <div class="col-12 col-sm-12 col-md-6 col-lg-6">{{det.CodBodegaDestino}}</div>

                                </div>



                                <div class="row">
                                    <div class="col-12 col-sm-12 col-md-6 col-lg-6">
                                        <span><b>Fecha </b></span>
                                    </div>
                                    <div class="col-12 col-sm-12 col-md-6 col-lg-6">{{det.Fecha | date:'dd/MM/yyyy'}}
                                    </div>

                                </div>


                                <div class="row">


                                    <button type="button" class="btn btn-primario" id="btnAutorizar{{det.NoRequisa}}"  (click)="V_AutorizarRequisa(det);">Autorizar
                                         <i class="fa-solid  fa-unlock fa-xl"></i>
                                    </button>

                                </div>





                            </div>

                            <div class="col-6 com-sm-6 col-md-6 col-lg-9">

                                <table class="table table-hover table-sm tabla-requisa">
                                    <thead>
                                        <tr class="row linea header-table">
                                            <th scope="col" class="col-12">
                                                <div class="row">
                                                    <div class="col-12 col-sm-12 col-md-12 col-lg-2 left">Productos</div>
                                                </div>

                                            </th>
                                        </tr>

                                    </thead>
                                    <tbody *ngFor="let l of V_Filtrar_Requisa(det),  let i = index;" class="tbody">



                                        <tr class="row" [ngClass]="i == 0 ? 'tr-primario' : 'tr-secundario'">
                                            <td class="col-12">
                                                <div class="row mobile-col">
                                                    <div class="col-12 col-sm-12 col-md-12 col-lg-12"><span><span><b
                                                                    class="mobile-col-etiqueta">P:</b></span>

                                                            {{l.Producto}}

                                                        </span></div>
                                                    <div class="col-12 col-sm-12 col-md-3 col-lg-3">

                                                        <div class="mobile-col-etiqueta"><b>U:</b>{{l.Ubicacion}}</div>
                                                        <div class="col-etiqueta-lg"><b>Ubicaci√≥n:</b><span class="info-producto"> {{l.Ubicacion}}</span></div>
                                                        

                                                    </div>


                                                    <div class="col-12 col-sm-12 col-md-3 col-lg-3">

                                                        <div class="mobile-col-etiqueta"><b>L:</b> {{l.NoLote}}</div>
                                                        <div class="col-etiqueta-lg"><b>No Lote:</b><span class="info-producto"> {{l.NoLote}}</span></div>
                                                        
                                                        

                                                    </div>





                                                    <div class="col-12 col-sm-12 col-md-3 col-lg-3">

                                                        <div class="mobile-col-etiqueta"><b>V:</b> {{l.Vence | date:'dd/MM/yyyy'}}</div>
                                                        <div class="col-etiqueta-lg"><b>Vence:</b><span class="info-producto"> {{l.Vence | date:'dd/MM/yyyy'}}</span></div>
                                                        
                                                        
                                                        


                                                    </div>


                                                    <div class="col-12 col-sm-12 col-md-3 col-lg-3">

                                                        <div class="mobile-col-etiqueta"><b>C:</b> {{ this.cFunciones.NumFormat(l.Cantidad , '2')}}</div>
                                                        <div class="col-etiqueta-lg"><b>Cantidad:</b><span class="info-producto"> {{ this.cFunciones.NumFormat(l.Cantidad , '2')}}</span></div>
                                                        
                                                        

                                                    </div>


                                                </div>


                                            </td>

                                        </tr>


                                    </tbody>
                                </table>

                            </div>


                        </div>


                    </td>
                </ng-container>









                <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="linea-bottom-secundario dashed">
                </tr>


            </table>
            </div>






        </div>

    </div>


</div>